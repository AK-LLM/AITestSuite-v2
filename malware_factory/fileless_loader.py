import importlib.util, sys, glob, os

MALWARE_PATH = "../payloads/malware/"
files = glob.glob(os.path.join(MALWARE_PATH, "*_python_poly.py"))

for f in files:
    try:
        spec = importlib.util.spec_from_file_location("mod", f)
        mod = importlib.util.module_from_spec(spec)
        sys.modules["mod"] = mod
        spec.loader.exec_module(mod)
        print(f"[+] Ran in-memory: {f}")
    except Exception as e:
        print(f"[-] Error: {e}")
